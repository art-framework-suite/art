@startuml

[*] --> Starting

Starting --> Error: Event, SubRun, Run, SwitchOutputFiles
Starting --> HandleFiles: InputFile
Starting --> Stopping: Stop
Starting: entry/beginJob

HandleFiles --> Error: Event, SubRun, Run, SwitchOutputFiles/closeAllFiles
HandleFiles --> HandleFiles: InputFile/closeInputFile
HandleFiles --> Stopping: Stop/closeAllFiles

Error --> Stopping: Stop
Error: entry/doErrorStuff

Stopping --> [*]: Stop
Stopping: entry/endJob

!include sm_handleFiles.iuml
@enduml
